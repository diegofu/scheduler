<form id="save-calendar-form" class="col-md-6 col-md-offset-3 text-center">
    <% if(calendar.has('name')) { %>
        <h2><%= calendar.get('name') %></h2>
    <% } else { %>
        <h2>Create a new calendar</h2>
    <% } %>
    <fieldset>
        <input class="form-control" type="text" id="calendar-name" name="name" placeholder="Calendar Name" value="<%= calendar.get('name') %>" required>
        <span class="help-block"></span>
        <textarea class="input-medium form-control" id="calendar-note" name="notes"><%= calendar.get('notes') %></textarea>
        <span class="help-block"></span>

        <% _.each(calendar.get('Availabilities'), function(availability) { %>
            <input type="hidden" class="input-medium form-control" name="Availabilities[][dayOfWeek]" value="<%= availability.dayOfWeek %>">
            <input type="hidden" class="input-medium form-control" name="Availabilities[][id]" value="<%= availability.id %>">
            <div class="row">
                <div class="col-sm-2">
                    <%= moment().isoWeekday(availability.dayOfWeek).format('dddd') %>
                </div>
                <div class="col-sm-5">
                    <div class="form-group">
                        <div class="input-group date datetimepicker">
                            <input type="text" class="form-control" name="Availabilities[][startTime]" value="<%= availability.startTime %>">
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-time"></span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="col-sm-5">
                    <div class="form-group">
                        <div class="input-group date datetimepicker" id="datetimepicker3">
                            <input type="text" class="form-control" name="Availabilities[][endTime]" value="<%= availability.endTime %>">
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-time"></span>
                            </span>
                        </div>
                    </div>
                </div>
                <script type="text/javascript">
                $(function() {
                    $('.datetimepicker').datetimepicker({
                        format: 'H:mm',
                    });
                });

                </script>
            </div>
        <% }) %>
        <div class="row form-group">
            <div class="col-sm-4">Display</div>
            <div class="col-sm-8">
                <input class="form-control" type="text" id="calendar-displaySlot" value="<%= calendar.get('defaultLength') %>" required>
            </div>
        </div>
        <div class="row form-group">
            <div class="col-sm-4">Default Length</div>
            <div class="col-sm-8">
                <select class="form-control" id="calendar-defaultLength" name="defaultLength" value="<%= calendar.get('defaultLength') %>" required>
                    <% _.each(slots, function(slot) { %>
                        <option <%= slot == calendar.get('defaultLength') ? 'selected' : '' %>><%= slot %></option>
                    <% }) %>
                </select>
            </div>
        </div>
        <div class="row form-group">
            <div class="col-sm-4">Minimum Length</div>
            <div class="col-sm-8">
                <select class="form-control" id="calendar-minLength" name="minLength" value="<%= calendar.get('minLength') %>" required>
                    <% _.each(slots, function(slot) { %>
                        <option <%= slot == calendar.get('minLength') ? 'selected' : '' %>><%= slot %></option>
                    <% }) %>
                </select>
            </div>
        </div>
        <div class="row form-group">
            <div class="col-sm-4">Maximum Length</div>
            <div class="col-sm-8">
                <select class="form-control" id="calendar-maxLength" name="maxLength" value="<%= calendar.get('maxLength') %>" required>
                    <% _.each(slots, function(slot) { %>
                        <option <%= slot == calendar.get('maxLength') ? 'selected' : '' %>><%= slot %></option>
                    <% }) %>
                </select>
            </div>
        </div>
        <button class="btn btn-lg btn-primary btn-block" type="submit" id="save-calendar-form-button">
            <% if(calendar.has('id')) { %>
                Save
            <% } else { %>
                Create
            <% } %>
        </button>
    </fieldset>
</form>
